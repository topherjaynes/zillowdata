!function(e,t,n,r,o,i){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p={id:"",params:{},version:"1.0.0"},g=function(){function e(){s(this,e)}return f(e,null,[{key:"isPresent",value:function(e){return null!=e&&""!==e}},{key:"now",value:function(){return 1*new Date}},{key:"guid",value:function(){return p.version+"-xxxxxxxx-".replace(/[x]/g,(function(e){var t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)}))+(1*new Date).toString(36)}},{key:"optionalData",value:function(t){return!1===e.isPresent(t)?"":"object"===c(t)?e.optionalData(JSON.stringify(t)):"function"==typeof t?e.optionalData(t()):String(t)}}]),e}(),h=function(){function t(){s(this,t)}return f(t,null,[{key:"nameAndVersion",value:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}},{key:"isMobile",value:function(){return"ontouchstart"in e||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"userAgent",value:function(){return e.navigator.userAgent}}]),t}(),d=function(){function t(){s(this,t)}return f(t,null,[{key:"getParameterByName",value:function(t,n){n||(n=e.location.href),t=t.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)","i").exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}},{key:"externalHost",value:function(e){return e.hostname!=location.hostname&&0===e.protocol.indexOf("http")}}]),t}(),m=function(){function n(e,t,r){s(this,n),this.params=[],this.event=e,this.timestamp=t,this.optional=g.optionalData(r),this.buildParams(),this.send()}return f(n,[{key:"buildParams",value:function(){var e=this.getAttribute();for(var t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t](t))}},{key:"getAttribute",value:function(){var t=this;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:function(){return p.id},ev:function(){return t.event},ed:function(){return t.optional},v:function(){return p.version},dl:function(){return e.location.href},ts:function(){return t.timestamp},md:function(){return h.isMobile()},ua:function(){return h.userAgent()}},p.params)}},{key:"setParam",value:function(e,t){g.isPresent(t)?this.params.push("".concat(e,"=").concat(encodeURIComponent(t))):this.params.push("".concat(e,"="))}},{key:"send",value:function(){e.navigator.sendBeacon?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){e.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImage",value:function(){this.img=t.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",t.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return"".concat("https://lighthouse.edoinc.com/dinghy.gif","?").concat(this.params.join("&"))}}]),n}();n.process=function(e,t,r){"init"===e?p.id=t:"param"===e?p.params[t]=function(){return r}:"event"===e&&("pageload"!==t||p.pageLoadOnce?"pageload"!==t&&"pageclose"!==t&&new m(t,g.now(),r):(p.pageLoadOnce=!0,new m(t,n.t,r)))};for(var v=0,y=n.queue.length;v<y;v++)n.process.apply(n,n.queue[v]);var b="object"===("undefined"==typeof safari?"undefined":c(safari))&&safari.pushNotification,w="onpageshow"in self&&!b?"pagehide":"unload";e.addEventListener(w,(function(){p.pageCloseOnce||(p.pageCloseOnce=!0,new m("pageclose",g.now(),(function(){if(g.isPresent(p.externalHost)&&g.now()-p.externalHost.time<5e3)return p.externalHost.link})))})),e.onload=function(){for(var e=t.getElementsByTagName("a"),n=0,r=e.length;n<r;n++)e[n].addEventListener("click",function(e){d.externalHost(this)&&(p.externalHost={link:this.href,time:g.now()})}.bind(e[n]));var o=t.querySelectorAll("[data-emitLighthouseEvent-event]");for(n=0,r=o.length;n<r;n++)o[n].addEventListener("click",function(e){var t=this.getAttribute("data-emitLighthouseEvent-event");t&&new m(t,g.now(),this.getAttribute("data-emitLighthouseEvent-data"))}.bind(o[n]))}}(window,document,window.emitLighthouseEvent);
